<%- include('./partials/header') %>
<% if (success && success.length > 0) { %>
  <div id="flash-message" class="fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg bg-green-500 text-white shadow-lg z-50 flex items-center">
    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
    <%= success %>
  </div>
<% } %>
<% if (error && error.length > 0) { %>
  <div id="flash-message" class="fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg bg-red-500 text-white shadow-lg z-50 flex items-center">
    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
    <%= error %>
  </div>
<% } %>

<!-- Main Content for Book Vaccine Page -->
<div
  class="min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"
>
  <div class="max-w-md w-full space-y-8">
    <div class="bg-white shadow-md rounded-lg p-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">
        Book Vaccine
      </h1>

      <!-- Vaccine Details -->
      <div class="bg-gray-50 shadow-inner rounded-lg p-6 mb-8">
        <h2 class="text-xl font-bold text-gray-800"><%= vaccine.name %></h2>
        <p class="text-sm text-gray-600 mt-2"><%= vaccine.description %></p>
        <p class="text-sm text-gray-600 mt-2">
          Available Slots: <%= vaccine.availableSlots %>
        </p>
        <p class="text-sm text-gray-600 mt-2">
          Hospital: <%= vaccine.hospital %>
        </p>
        <% if (vaccine.availableSlots <= 0) { %>
          <div class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg text-center font-semibold">
            NO FURTHER SLOTS AVAILABLE<br>
            Contact <a href="mailto:SwosthaSamaj@gmail.com" class="underline text-blue-700">SwosthaSamaj@gmail.com</a> for any issues.
          </div>
        <% } %>
      </div>

      <!-- Booking Form -->
      <form
        action="/users/book-vaccine/<%= vaccine.id %>"
        method="POST"
        class="space-y-6"
      >
        <button
          type="submit"
          class="w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition duration-200"
          <% if (vaccine.availableSlots <= 0) { %>disabled style="opacity:0.5;cursor:not-allowed;"<% } %>
        >
          Confirm Booking
        </button>
      </form>
    </div>
  </div>
</div>

<%- include('./partials/footer') %>
